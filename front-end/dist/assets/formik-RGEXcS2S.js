import{d as rr}from"./deepmerge-DhIoniG1.js";import{c as G,t as Tr,a as hr,i as Sr}from"./lodash-es-ClCkCI8n.js";import{r as f}from"./react-Dp_KS7la.js";import{i as O}from"./react-fast-compare-Ded4px3C.js";import"./hoist-non-react-statics-C48UpQYE.js";function S(){return S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var u=arguments[t];for(var a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a])}return e},S.apply(this,arguments)}function mr(e,t){if(e==null)return{};var u={},a=Object.keys(e),l,s;for(s=0;s<a.length;s++)l=a[s],!(t.indexOf(l)>=0)&&(u[l]=e[l]);return u}var j=f.createContext(void 0);j.displayName="FormikContext";j.Provider;j.Consumer;function Nr(){var e=f.useContext(j);return e}var F=function(t){return typeof t=="function"},K=function(t){return t!==null&&typeof t=="object"},Pr=function(t){return String(Math.floor(Number(t)))===t},Z=function(t){return Object.prototype.toString.call(t)==="[object String]"},x=function(t){return K(t)&&F(t.then)};function m(e,t,u,a){a===void 0&&(a=0);for(var l=Tr(t);e&&a<l.length;)e=e[l[a++]];return a!==l.length&&!e||e===void 0?u:e}function k(e,t,u){for(var a=hr(e),l=a,s=0,v=Tr(t);s<v.length-1;s++){var h=v[s],_=m(e,v.slice(0,s+1));if(_&&(K(_)||Array.isArray(_)))l=l[h]=hr(_);else{var R=v[s+1];l=l[h]=Pr(R)&&Number(R)>=0?[]:{}}}return(s===0?e:l)[v[s]]===u?e:(u===void 0?delete l[v[s]]:l[v[s]]=u,s===0&&u===void 0&&delete a[v[s]],a)}function Ir(e,t,u,a){u===void 0&&(u=new WeakMap),a===void 0&&(a={});for(var l=0,s=Object.keys(e);l<s.length;l++){var v=s[l],h=e[v];K(h)?u.get(h)||(u.set(h,!0),a[v]=Array.isArray(h)?[]:{},Ir(h,t,u,a[v])):a[v]=t}return a}function Hr(e,t){switch(t.type){case"SET_VALUES":return S({},e,{values:t.payload});case"SET_TOUCHED":return S({},e,{touched:t.payload});case"SET_ERRORS":return O(e.errors,t.payload)?e:S({},e,{errors:t.payload});case"SET_STATUS":return S({},e,{status:t.payload});case"SET_ISSUBMITTING":return S({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return S({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return S({},e,{values:k(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return S({},e,{touched:k(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return S({},e,{errors:k(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return S({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return S({},e,{touched:Ir(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":return S({},e,{isSubmitting:!1});case"SUBMIT_SUCCESS":return S({},e,{isSubmitting:!1});default:return e}}var M={},W={};function xr(e){var t=e.validateOnChange,u=t===void 0?!0:t,a=e.validateOnBlur,l=a===void 0?!0:a,s=e.validateOnMount,v=s===void 0?!1:s,h=e.isInitialValid,_=e.enableReinitialize,R=_===void 0?!1:_,tr=e.onSubmit,Rr=mr(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),c=S({validateOnChange:u,validateOnBlur:l,validateOnMount:v,onSubmit:tr},Rr),b=f.useRef(c.initialValues),L=f.useRef(c.initialErrors||M),D=f.useRef(c.initialTouched||W),U=f.useRef(c.initialStatus),A=f.useRef(!1),V=f.useRef({});f.useEffect(function(){return A.current=!0,function(){A.current=!1}},[]);var br=f.useState(0),Ar=br[1],P=f.useRef({values:G(c.initialValues),errors:G(c.initialErrors)||M,touched:G(c.initialTouched)||W,status:G(c.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),y=P.current,p=f.useCallback(function(r){var i=P.current;P.current=Hr(i,r),i!==P.current&&Ar(function(n){return n+1})},[]),ir=f.useCallback(function(r,i){return new Promise(function(n,o){var d=c.validate(r,i);d==null?n(M):x(d)?d.then(function(E){n(E||M)},function(E){o(E)}):n(d)})},[c.validate]),$=f.useCallback(function(r,i){var n=c.validationSchema,o=F(n)?n(i):n,d=i&&o.validateAt?o.validateAt(i,r):Wr(r,o);return new Promise(function(E,T){d.then(function(){E(M)},function(C){C.name==="ValidationError"?E(Gr(C)):T(C)})})},[c.validationSchema]),ar=f.useCallback(function(r,i){return new Promise(function(n){return n(V.current[r].validate(i))})},[]),nr=f.useCallback(function(r){var i=Object.keys(V.current).filter(function(o){return F(V.current[o].validate)}),n=i.length>0?i.map(function(o){return ar(o,m(r,o))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(n).then(function(o){return o.reduce(function(d,E,T){return E==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||E&&(d=k(d,i[T],E)),d},{})})},[ar]),gr=f.useCallback(function(r){return Promise.all([nr(r),c.validationSchema?$(r):{},c.validate?ir(r):{}]).then(function(i){var n=i[0],o=i[1],d=i[2],E=rr.all([n,o,d],{arrayMerge:jr});return E})},[c.validate,c.validationSchema,nr,ir,$]),g=I(function(r){return r===void 0&&(r=y.values),p({type:"SET_ISVALIDATING",payload:!0}),gr(r).then(function(i){return A.current&&(p({type:"SET_ISVALIDATING",payload:!1}),p({type:"SET_ERRORS",payload:i})),i})});f.useEffect(function(){v&&A.current===!0&&O(b.current,c.initialValues)&&g(b.current)},[v,g]);var N=f.useCallback(function(r){var i=r&&r.values?r.values:b.current,n=r&&r.errors?r.errors:L.current?L.current:c.initialErrors||{},o=r&&r.touched?r.touched:D.current?D.current:c.initialTouched||{},d=r&&r.status?r.status:U.current?U.current:c.initialStatus;b.current=i,L.current=n,D.current=o,U.current=d;var E=function(){p({type:"RESET_FORM",payload:{isSubmitting:!!r&&!!r.isSubmitting,errors:n,touched:o,status:d,values:i,isValidating:!!r&&!!r.isValidating,submitCount:r&&r.submitCount&&typeof r.submitCount=="number"?r.submitCount:0}})};if(c.onReset){var T=c.onReset(y.values,pr);x(T)?T.then(E):E()}else E()},[c.initialErrors,c.initialStatus,c.initialTouched,c.onReset]);f.useEffect(function(){A.current===!0&&!O(b.current,c.initialValues)&&R&&(b.current=c.initialValues,N(),v&&g(b.current))},[R,c.initialValues,N,v,g]),f.useEffect(function(){R&&A.current===!0&&!O(L.current,c.initialErrors)&&(L.current=c.initialErrors||M,p({type:"SET_ERRORS",payload:c.initialErrors||M}))},[R,c.initialErrors]),f.useEffect(function(){R&&A.current===!0&&!O(D.current,c.initialTouched)&&(D.current=c.initialTouched||W,p({type:"SET_TOUCHED",payload:c.initialTouched||W}))},[R,c.initialTouched]),f.useEffect(function(){R&&A.current===!0&&!O(U.current,c.initialStatus)&&(U.current=c.initialStatus,p({type:"SET_STATUS",payload:c.initialStatus}))},[R,c.initialStatus,c.initialTouched]);var ur=I(function(r){if(V.current[r]&&F(V.current[r].validate)){var i=m(y.values,r),n=V.current[r].validate(i);return x(n)?(p({type:"SET_ISVALIDATING",payload:!0}),n.then(function(o){return o}).then(function(o){p({type:"SET_FIELD_ERROR",payload:{field:r,value:o}}),p({type:"SET_ISVALIDATING",payload:!1})})):(p({type:"SET_FIELD_ERROR",payload:{field:r,value:n}}),Promise.resolve(n))}else if(c.validationSchema)return p({type:"SET_ISVALIDATING",payload:!0}),$(y.values,r).then(function(o){return o}).then(function(o){p({type:"SET_FIELD_ERROR",payload:{field:r,value:m(o,r)}}),p({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),Fr=f.useCallback(function(r,i){var n=i.validate;V.current[r]={validate:n}},[]),_r=f.useCallback(function(r){delete V.current[r]},[]),lr=I(function(r,i){p({type:"SET_TOUCHED",payload:r});var n=i===void 0?l:i;return n?g(y.values):Promise.resolve()}),or=f.useCallback(function(r){p({type:"SET_ERRORS",payload:r})},[]),cr=I(function(r,i){var n=F(r)?r(y.values):r;p({type:"SET_VALUES",payload:n});var o=i===void 0?u:i;return o?g(n):Promise.resolve()}),H=f.useCallback(function(r,i){p({type:"SET_FIELD_ERROR",payload:{field:r,value:i}})},[]),w=I(function(r,i,n){p({type:"SET_FIELD_VALUE",payload:{field:r,value:i}});var o=n===void 0?u:n;return o?g(k(y.values,r,i)):Promise.resolve()}),sr=f.useCallback(function(r,i){var n=i,o=r,d;if(!Z(r)){r.persist&&r.persist();var E=r.target?r.target:r.currentTarget,T=E.type,C=E.name,Q=E.id,X=E.value,wr=E.checked;E.outerHTML;var yr=E.options,Br=E.multiple;n=i||C||Q,o=/number|range/.test(T)?(d=parseFloat(X),isNaN(d)?"":d):/checkbox/.test(T)?$r(m(y.values,n),wr,X):yr&&Br?Kr(yr):X}n&&w(n,o)},[w,y.values]),z=I(function(r){if(Z(r))return function(i){return sr(i,r)};sr(r)}),B=I(function(r,i,n){i===void 0&&(i=!0),p({type:"SET_FIELD_TOUCHED",payload:{field:r,value:i}});var o=n===void 0?l:n;return o?g(y.values):Promise.resolve()}),fr=f.useCallback(function(r,i){r.persist&&r.persist();var n=r.target,o=n.name,d=n.id;n.outerHTML;var E=i||o||d;B(E,!0)},[B]),Y=I(function(r){if(Z(r))return function(i){return fr(i,r)};fr(r)}),dr=f.useCallback(function(r){F(r)?p({type:"SET_FORMIK_STATE",payload:r}):p({type:"SET_FORMIK_STATE",payload:function(){return r}})},[]),vr=f.useCallback(function(r){p({type:"SET_STATUS",payload:r})},[]),Er=f.useCallback(function(r){p({type:"SET_ISSUBMITTING",payload:r})},[]),q=I(function(){return p({type:"SUBMIT_ATTEMPT"}),g().then(function(r){var i=r instanceof Error,n=!i&&Object.keys(r).length===0;if(n){var o;try{if(o=Vr(),o===void 0)return}catch(d){throw d}return Promise.resolve(o).then(function(d){return A.current&&p({type:"SUBMIT_SUCCESS"}),d}).catch(function(d){if(A.current)throw p({type:"SUBMIT_FAILURE"}),d})}else if(A.current&&(p({type:"SUBMIT_FAILURE"}),i))throw r})}),Cr=I(function(r){r&&r.preventDefault&&F(r.preventDefault)&&r.preventDefault(),r&&r.stopPropagation&&F(r.stopPropagation)&&r.stopPropagation(),q().catch(function(i){console.warn("Warning: An unhandled error was caught from submitForm()",i)})}),pr={resetForm:N,validateForm:g,validateField:ur,setErrors:or,setFieldError:H,setFieldTouched:B,setFieldValue:w,setStatus:vr,setSubmitting:Er,setTouched:lr,setValues:cr,setFormikState:dr,submitForm:q},Vr=I(function(){return tr(y.values,pr)}),Lr=I(function(r){r&&r.preventDefault&&F(r.preventDefault)&&r.preventDefault(),r&&r.stopPropagation&&F(r.stopPropagation)&&r.stopPropagation(),N()}),Dr=f.useCallback(function(r){return{value:m(y.values,r),error:m(y.errors,r),touched:!!m(y.touched,r),initialValue:m(b.current,r),initialTouched:!!m(D.current,r),initialError:m(L.current,r)}},[y.errors,y.touched,y.values]),Mr=f.useCallback(function(r){return{setValue:function(n,o){return w(r,n,o)},setTouched:function(n,o){return B(r,n,o)},setError:function(n){return H(r,n)}}},[w,B,H]),Or=f.useCallback(function(r){var i=K(r),n=i?r.name:r,o=m(y.values,n),d={name:n,value:o,onChange:z,onBlur:Y};if(i){var E=r.type,T=r.value,C=r.as,Q=r.multiple;E==="checkbox"?T===void 0?d.checked=!!o:(d.checked=!!(Array.isArray(o)&&~o.indexOf(T)),d.value=T):E==="radio"?(d.checked=o===T,d.value=T):C==="select"&&Q&&(d.value=d.value||[],d.multiple=!0)}return d},[Y,z,y.values]),J=f.useMemo(function(){return!O(b.current,y.values)},[b.current,y.values]),kr=f.useMemo(function(){return typeof h<"u"?J?y.errors&&Object.keys(y.errors).length===0:h!==!1&&F(h)?h(c):h:y.errors&&Object.keys(y.errors).length===0},[h,J,y.errors,c]),Ur=S({},y,{initialValues:b.current,initialErrors:L.current,initialTouched:D.current,initialStatus:U.current,handleBlur:Y,handleChange:z,handleReset:Lr,handleSubmit:Cr,resetForm:N,setErrors:or,setFormikState:dr,setFieldTouched:B,setFieldValue:w,setFieldError:H,setStatus:vr,setSubmitting:Er,setTouched:lr,setValues:cr,submitForm:q,validateForm:g,validateField:ur,isValid:kr,dirty:J,unregisterField:_r,registerField:Fr,getFieldProps:Or,getFieldMeta:Dr,getFieldHelpers:Mr,validateOnBlur:l,validateOnChange:u,validateOnMount:v});return Ur}function Gr(e){var t={};if(e.inner){if(e.inner.length===0)return k(t,e.path,e.message);for(var l=e.inner,u=Array.isArray(l),a=0,l=u?l:l[Symbol.iterator]();;){var s;if(u){if(a>=l.length)break;s=l[a++]}else{if(a=l.next(),a.done)break;s=a.value}var v=s;m(t,v.path)||(t=k(t,v.path,v.message))}}return t}function Wr(e,t,u,a){u===void 0&&(u=!1);var l=er(e);return t[u?"validateSync":"validate"](l,{abortEarly:!1,context:l})}function er(e){var t=Array.isArray(e)?[]:{};for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var a=String(u);Array.isArray(e[a])===!0?t[a]=e[a].map(function(l){return Array.isArray(l)===!0||Sr(l)?er(l):l!==""?l:void 0}):Sr(e[a])?t[a]=er(e[a]):t[a]=e[a]!==""?e[a]:void 0}return t}function jr(e,t,u){var a=e.slice();return t.forEach(function(s,v){if(typeof a[v]>"u"){var h=u.clone!==!1,_=h&&u.isMergeableObject(s);a[v]=_?rr(Array.isArray(s)?[]:{},s,u):s}else u.isMergeableObject(s)?a[v]=rr(e[v],s,u):e.indexOf(s)===-1&&a.push(s)}),a}function Kr(e){return Array.from(e).filter(function(t){return t.selected}).map(function(t){return t.value})}function $r(e,t,u){if(typeof e=="boolean")return!!t;var a=[],l=!1,s=-1;if(Array.isArray(e))a=e,s=e.indexOf(u),l=s>=0;else if(!u||u=="true"||u=="false")return!!t;return t&&u&&!l?a.concat(u):l?a.slice(0,s).concat(a.slice(s+1)):a}var zr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?f.useLayoutEffect:f.useEffect;function I(e){var t=f.useRef(e);return zr(function(){t.current=e}),f.useCallback(function(){for(var u=arguments.length,a=new Array(u),l=0;l<u;l++)a[l]=arguments[l];return t.current.apply(void 0,a)},[])}var Yr=f.forwardRef(function(e,t){var u=e.action,a=mr(e,["action"]),l=u??"#",s=Nr(),v=s.handleReset,h=s.handleSubmit;return f.createElement("form",S({onSubmit:h,ref:t,onReset:v,action:l},a))});Yr.displayName="Form";export{xr as u};
