import{r as y,j as r}from"./react-Dp_KS7la.js";import{b as v,S as q,I as i,B as F}from"./index-BcwW7CbF.js";import{u as S}from"./formik-RGEXcS2S.js";import{j as t}from"./joi--827UJ8c.js";import{u as N}from"./react-router-DbU2kh4Y.js";import"./bootstrap-B8dv8rE8.js";import"./react-dom-FFTsjXSu.js";import"./scheduler-BNqrtbQi.js";import"./jwt-decode-VWaDGczM.js";import"./axios-DW_MHI2K.js";import"./react-router-hash-link-DokW0acY.js";/* empty css                        */import"./deepmerge-DhIoniG1.js";import"./lodash-es-ClCkCI8n.js";import"./react-fast-compare-Ded4px3C.js";import"./hoist-non-react-statics-C48UpQYE.js";import"./react-is-CnyDuYXe.js";import"./cookie--_YQFYBD.js";function J(){var o,l,n,m;const p=N(),{error:a,loading:g,createHoroscop:x,getSigns:b,zodiacSigns:f}=v();y.useEffect(()=>{b()},[]);const e=S({validateOnMount:!0,initialValues:{sign:"",title:"",subtitle:"",description:"",image:{url:"https://r2.starryai.com/results/907419597/93bf1e0e-4ec4-4644-8abd-685cfbba7a17.webp",alt:"default image"}},validate(s){const j=t.object({sign:t.string().min(2).max(256).required(),title:t.string().min(2).max(256).required(),subtitle:t.string().min(2).max(1024).required(),description:t.string().min(2).max(1024).required(),image:t.object().keys({url:t.string().uri().allow("").default(""),alt:t.string().min(2).max(256).required()})}),{error:d}=j.validate(s,{abortEarly:!1});if(!d)return{};let u={};for(const c of d.details){const h=c.path.join(".");u[h]=c.message}return u},async onSubmit(s){await x(s),p("/horoscop-page")}});return g?r.jsx("div",{children:"Loading..."}):a?r.jsxs("div",{children:["ERROR: ",a]}):r.jsx(r.Fragment,{children:r.jsxs("div",{className:"container",children:[r.jsx("p",{children:"צור הורוסקופ"}),r.jsx("div",{className:"container d-flex justify-content-center",children:r.jsxs("form",{onSubmit:e.handleSubmit,noValidate:!0,autoComplete:"off",className:"w-75",children:[a&&r.jsxs("div",{className:"alert alert-danger",children:["שגיאה: ",a]}),r.jsx(q,{label:"בחרי מזל",name:"zodiacSigns",option:f,error:e.touched.sign&&e.errors.sign,...e.getFieldProps("sign")}),r.jsx(i,{label:"כותרת",name:"title",type:"textarea",id:"title",required:!0,error:e.touched.title&&e.errors.title,...e.getFieldProps("title")}),r.jsx(i,{label:"כותרת משנה",name:"subtitle",type:"textarea",id:"subtitle",required:!0,error:e.touched.subtitle&&e.errors.subtitle,...e.getFieldProps("subtitle")}),r.jsx(i,{label:"תיאור",name:"description",type:"textarea",id:"description",required:!0,error:e.touched.description&&e.errors.description,...e.getFieldProps("description")}),r.jsx(i,{label:"כתובת URL",name:"image.url",type:"textarea",id:"url",required:!0,error:((l=(o=e.touched)==null?void 0:o.image)==null?void 0:l.url)&&e.errors["image.url"],...e.getFieldProps("image.url")}),r.jsx(i,{type:"text",label:"אלט לתמונה",id:"alt",name:"image.alt",error:((m=(n=e.touched)==null?void 0:n.image)==null?void 0:m.alt)&&e.errors["image.alt"],...e.getFieldProps("image.alt")}),r.jsx(F,{type:"submit",className:"custom-bg-purple custom-gold-color",description:"צור הורוסקופ",disabled:!e.isValid})]})})]})})}export{J as default};
